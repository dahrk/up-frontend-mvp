{"ast":null,"code":"'use strict';\n\nclass QuickLRU {\n  constructor(options = {}) {\n    if (!(options.maxSize && options.maxSize > 0)) {\n      throw new TypeError('`maxSize` must be a number greater than 0');\n    }\n\n    this.maxSize = options.maxSize;\n    this.onEviction = options.onEviction;\n    this.cache = new Map();\n    this.oldCache = new Map();\n    this._size = 0;\n  }\n\n  _set(key, value) {\n    this.cache.set(key, value);\n    this._size++;\n\n    if (this._size >= this.maxSize) {\n      this._size = 0;\n\n      if (typeof this.onEviction === 'function') {\n        for (const [key, value] of this.oldCache.entries()) {\n          this.onEviction(key, value);\n        }\n      }\n\n      this.oldCache = this.cache;\n      this.cache = new Map();\n    }\n  }\n\n  get(key) {\n    if (this.cache.has(key)) {\n      return this.cache.get(key);\n    }\n\n    if (this.oldCache.has(key)) {\n      const value = this.oldCache.get(key);\n      this.oldCache.delete(key);\n\n      this._set(key, value);\n\n      return value;\n    }\n  }\n\n  set(key, value) {\n    if (this.cache.has(key)) {\n      this.cache.set(key, value);\n    } else {\n      this._set(key, value);\n    }\n\n    return this;\n  }\n\n  has(key) {\n    return this.cache.has(key) || this.oldCache.has(key);\n  }\n\n  peek(key) {\n    if (this.cache.has(key)) {\n      return this.cache.get(key);\n    }\n\n    if (this.oldCache.has(key)) {\n      return this.oldCache.get(key);\n    }\n  }\n\n  delete(key) {\n    const deleted = this.cache.delete(key);\n\n    if (deleted) {\n      this._size--;\n    }\n\n    return this.oldCache.delete(key) || deleted;\n  }\n\n  clear() {\n    this.cache.clear();\n    this.oldCache.clear();\n    this._size = 0;\n  }\n\n  *keys() {\n    for (const [key] of this) {\n      yield key;\n    }\n  }\n\n  *values() {\n    for (const [, value] of this) {\n      yield value;\n    }\n  }\n\n  *[Symbol.iterator]() {\n    for (const item of this.cache) {\n      yield item;\n    }\n\n    for (const item of this.oldCache) {\n      const [key] = item;\n\n      if (!this.cache.has(key)) {\n        yield item;\n      }\n    }\n  }\n\n  get size() {\n    let oldCacheSize = 0;\n\n    for (const key of this.oldCache.keys()) {\n      if (!this.cache.has(key)) {\n        oldCacheSize++;\n      }\n    }\n\n    return Math.min(this._size + oldCacheSize, this.maxSize);\n  }\n\n}\n\nmodule.exports = QuickLRU;","map":{"version":3,"sources":["/home/td/code/up-frontend-mvp/node_modules/quick-lru/index.js"],"names":["QuickLRU","constructor","options","maxSize","TypeError","onEviction","cache","Map","oldCache","_size","_set","key","value","set","entries","get","has","delete","peek","deleted","clear","keys","values","Symbol","iterator","item","size","oldCacheSize","Math","min","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nclass QuickLRU {\n\tconstructor(options = {}) {\n\t\tif (!(options.maxSize && options.maxSize > 0)) {\n\t\t\tthrow new TypeError('`maxSize` must be a number greater than 0');\n\t\t}\n\n\t\tthis.maxSize = options.maxSize;\n\t\tthis.onEviction = options.onEviction;\n\t\tthis.cache = new Map();\n\t\tthis.oldCache = new Map();\n\t\tthis._size = 0;\n\t}\n\n\t_set(key, value) {\n\t\tthis.cache.set(key, value);\n\t\tthis._size++;\n\n\t\tif (this._size >= this.maxSize) {\n\t\t\tthis._size = 0;\n\n\t\t\tif (typeof this.onEviction === 'function') {\n\t\t\t\tfor (const [key, value] of this.oldCache.entries()) {\n\t\t\t\t\tthis.onEviction(key, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.oldCache = this.cache;\n\t\t\tthis.cache = new Map();\n\t\t}\n\t}\n\n\tget(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\tconst value = this.oldCache.get(key);\n\t\t\tthis.oldCache.delete(key);\n\t\t\tthis._set(key, value);\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tset(key, value) {\n\t\tif (this.cache.has(key)) {\n\t\t\tthis.cache.set(key, value);\n\t\t} else {\n\t\t\tthis._set(key, value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\thas(key) {\n\t\treturn this.cache.has(key) || this.oldCache.has(key);\n\t}\n\n\tpeek(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\treturn this.oldCache.get(key);\n\t\t}\n\t}\n\n\tdelete(key) {\n\t\tconst deleted = this.cache.delete(key);\n\t\tif (deleted) {\n\t\t\tthis._size--;\n\t\t}\n\n\t\treturn this.oldCache.delete(key) || deleted;\n\t}\n\n\tclear() {\n\t\tthis.cache.clear();\n\t\tthis.oldCache.clear();\n\t\tthis._size = 0;\n\t}\n\n\t* keys() {\n\t\tfor (const [key] of this) {\n\t\t\tyield key;\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const [, value] of this) {\n\t\t\tyield value;\n\t\t}\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tfor (const item of this.cache) {\n\t\t\tyield item;\n\t\t}\n\n\t\tfor (const item of this.oldCache) {\n\t\t\tconst [key] = item;\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t}\n\t}\n\n\tget size() {\n\t\tlet oldCacheSize = 0;\n\t\tfor (const key of this.oldCache.keys()) {\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\toldCacheSize++;\n\t\t\t}\n\t\t}\n\n\t\treturn Math.min(this._size + oldCacheSize, this.maxSize);\n\t}\n}\n\nmodule.exports = QuickLRU;\n"]},"metadata":{},"sourceType":"script"}